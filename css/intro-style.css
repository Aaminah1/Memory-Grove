:root{
  --ink:#e7ebf4; --muted:#a5acb9;
  --bg:#0b0d13; --bg2:#0d111b;
   --sceneHeight: 300vh;   /* try 300–800vh */

}

*{ box-sizing:border-box }
html,body{ height:100% }
body{
  min-height: var(--sceneHeight);
  margin:0; color:var(--ink);
  background:
    radial-gradient(1200px 700px at 50% 0%, var(--bg2) 0%, var(--bg) 60%) fixed,
    #0b0d13;
  font:16px/1.6 ui-sans-serif, system-ui, Segoe UI, Roboto, sans-serif;
  overflow-x:hidden;
}
body::after{
  content:"";
  position: fixed; inset: 0;
  pointer-events: none;
  mix-blend-mode: multiply;
  opacity: var(--abyss, 0);
  background:
    radial-gradient(1200px 700px at 50% -10%,
      rgba(0,0,0,0) 0%,
      rgba(0,0,0,.35) 50%,
      rgba(0,0,0,.90) 100%);
  transition: opacity 180ms linear;
}
/* ---------- HERO LAYOUT (upper third) ---------- */
.intro{
  min-height: 100svh;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding-top:12vh;          /* raise/lower title here */
  padding-inline:20px;
  position:relative;
  z-index:1;
}
.brand{ margin:0; text-align:center }

/* ---------- TITLE ---------- */
#title{
  font-family:"Cinzel", ui-serif, Georgia, serif;
  font-weight:700;
  letter-spacing:.03em;
  font-size: clamp(40px, 7vw, 96px);
  line-height:1.04;
  margin:0 0 .6rem;
  text-transform:uppercase;

  opacity:0; transform:translateY(16px) scale(1.01); filter:blur(8px);
  animation: titleReveal 1.6s cubic-bezier(.19,.95,.12,.99) forwards .25s;

  position:relative; isolation:isolate;
}
#title.revealed{ opacity:1 !important; transform:none !important; filter:none !important; animation:none !important; }

/* per-letter spans */
#title .ch{
  position:relative;         /* needed for ::before/::after on a single letter */
  display:inline-block;
  opacity:1; transform:none; filter:none;
}

/* tiny idle nudge */
#title .ch.g{ animation: letterNudge 220ms steps(2,end) 1 }
@keyframes letterNudge{
  0%{ transform: translate(0,0) }
  50%{ transform: translate(1px,-1px) skewX(4deg) }
  100%{ transform: translate(0,0) }
}

/* swapped letter emphasis */
#title .ch.alt{
  color:#fff;
  text-shadow: 0 0 18px rgba(255,255,255,.25);
  transform: translateY(-1px) scale(1.03);
}

/* one-time reveal */
@keyframes titleReveal{
  0%{ opacity:0; transform:translateY(16px) scale(1.01); filter:blur(8px); letter-spacing:.07em }
  60%{ opacity:.9 }
  100%{ opacity:1; transform:none; filter:blur(0); letter-spacing:.03em }
}

/* ---------- WORD-ONLY RGB EDGE (GROVE/GRAVE) ---------- */
.wordWrap{ position:relative; display:inline-block }
.wordWrap.rgbWord::before,
.wordWrap.rgbWord::after{
  content: attr(data-word);
  position:absolute; inset:0; pointer-events:none;
  mix-blend-mode:screen;
  opacity:.9;
  filter: blur(.8px) saturate(1.35);
}
.wordWrap.rgbWord::before{ color:#ff2a6d; transform:translate(6px,-3px) skewX(6deg) }
.wordWrap.rgbWord::after { color:#2ad4ff; transform:translate(-6px,3px) skewX(-6deg) }
.wordWrap.pulse{ animation: wordPulse 950ms cubic-bezier(.2,.85,.1,1) 1 }
@keyframes wordPulse{
  0%{ transform:none; letter-spacing:inherit }
  35%{ transform:scale(1.035); letter-spacing:.06em }
  100%{ transform:none; letter-spacing:inherit }
}

/* ---------- MEMORY DECAY: per-letter edge/halo/flip ---------- */
#title .ch.rgbEdge::before,
#title .ch.rgbEdge::after{
  content: attr(data-ch);
  position:absolute; inset:0; pointer-events:none;
  mix-blend-mode:screen;
  opacity:.9; filter:blur(.7px) saturate(1.35);
}
#title .ch.rgbEdge::before{ color:#ff2a6d; transform:translate(3px,-2px) skewX(4deg) }
#title .ch.rgbEdge::after { color:#2ad4ff; transform:translate(-3px,2px) skewX(-4deg) }
#title .ch.swapGlow{
  text-shadow: 0 0 28px rgba(255,255,255,.55), 0 0 56px rgba(160,200,255,.45);
}
#title .ch.flipY { transform: scaleY(-1); }
#title .ch.flipX { transform: scaleX(-1); }

/* ghost trails */
#title .ch.trail::before,
#title .ch.trail::after{
  content: attr(data-ch);
  position:absolute; inset:0; pointer-events:none;
  opacity:.16; filter:blur(0.6px);
}
#title .ch.trail::before{ transform:translate(1px, 0.5px) scale(1.01); }
#title .ch.trail::after { transform:translate(-1px,-0.5px) scale(1.01); opacity:.10; }

/* fade/smudge/drip */
#title .ch.fade { opacity:.45; transform:translateY(1px) scale(0.98); transition:opacity .15s linear, transform .15s linear; }
#title .ch.smudge { filter:url(#smear) blur(0.4px) contrast(1.05); animation:smudgeShake 260ms steps(2,end) 1; }
@keyframes smudgeShake{ 0%{transform:translate(0,0) skewX(0)} 50%{transform:translate(1px,-1px) skewX(5deg)} 100%{transform:translate(0,0) skewX(0)} }
#title .ch.drip::after{
  content:''; position:absolute; left:50%; top:65%; width:4px; height:4px; margin-left:-2px;
  background: radial-gradient(circle at 50% 50%, #e7ebf4 0%, rgba(231,235,244,.0) 70%);
  filter:blur(0.4px); animation:dripFall 420ms ease-in forwards;
}
@keyframes dripFall{ 0%{transform:translate(-50%,0);opacity:.9} 90%{transform:translate(-50%,18px);opacity:.9} 100%{transform:translate(-50%,20px) scale(.6);opacity:0} }

/* subtitle stays hidden for now */
.sub{ color:var(--muted); font-size:clamp(14px,2.2vw,18px); margin:0; opacity:0 }

/* accessibility */
@media (prefers-reduced-motion: reduce){
  #title{ animation:none; opacity:1; transform:none; filter:none }
}
/* ============== GAUNTLET LAYOUT ============== */
#gauntlet{
  position: relative;
  display: flex;                 /* CTA can sit at the end */
  flex-direction: column;
  min-height: 200vh;             /* scene length */
  padding: 16vh 6vw 24vh;
  background: linear-gradient(#0b0d13, #070a12 45%, #03050a 75%, #000 100%);
  isolation: isolate;            /* own stacking context */
  overflow: clip;
  z-index: 0;
}

/* local veil that darkens as you scroll (driven by --gVeil) */
#gauntlet::before{
  content:"";
  position: sticky; top:0; height:100vh;
  pointer-events:none;
  z-index: 0;                    /* <-- below FX layers */
  background:
    radial-gradient(1200px 700px at 50% -10%,
      rgba(0,0,0,0) 0%, rgba(0,0,0,.35) 50%, rgba(0,0,0,.9) 100%);
  opacity: var(--gVeil, .8);
}

/* FX layers sit above the veil */
#gauntlet .fx-sparkles,
#gauntlet .fx-glyphs,
#ghostSwarm{
  position:absolute; inset:0;
  pointer-events:none;
  z-index: 1;                    /* <-- above ::before */
}

/* ============== SPARKLES (soft, slow, subtle) ============== */
#gauntlet .fx-sparkles{
  background-image:
    radial-gradient(2px 2px at 10% 20%, rgba(255,255,255,.22) 0, transparent 60%),
    radial-gradient(2px 2px at 70% 35%, rgba(255,255,255,.16) 0, transparent 60%),
    radial-gradient(2px 2px at 30% 75%, rgba(255,255,255,.14) 0, transparent 60%),
    radial-gradient(2px 2px at 85% 60%, rgba(255,255,255,.20) 0, transparent 60%);
  mix-blend-mode: screen;
  animation: sparkFloat 22s ease-in-out infinite;
  opacity: .6;
}
@keyframes sparkFloat{
  0%,100%{ transform: translateY(0) }
  50%    { transform: translateY(-40px) }
}

/* ============== GLYPHS (rise+sway+glow) ============== */
#gauntlet .fx-glyphs .g{
  position:absolute;
  left: var(--x, 50%);
  top:  calc(100% + 10vh);       /* start below view */
  transform: translate3d(0,0,0);
  color: rgba(220,230,255,.18);
  font: 600 clamp(14px,2.4vw,28px) ui-monospace, "Courier New", monospace;
  filter: blur(.25px);
  opacity: 0;
  animation:
    glyphRise var(--dur,18s) linear infinite,
    glyphSway var(--sway,7s) ease-in-out infinite,
    glyphGlow var(--glow,5s) ease-in-out infinite;
}
@keyframes glyphRise { from { transform: translate3d(0,0,0); } to { transform: translate3d(0,-140vh,0); } }
@keyframes glyphSway { 0%,100% { margin-left: 0; } 50% { margin-left: var(--dx, 10vw); } }
@keyframes glyphGlow { 0%,100% { opacity: 0; } 10%,90% { opacity: .22; } 50% { opacity: .34; } }

/* Swarm (kept above FX for readability; currently not spawning) */
#ghostSwarm{ z-index: 2; }

/* CTA */
#gauntlet .gauntlet-cta{
  margin-top:auto; text-align:center; max-width:920px; align-self:center; z-index:3;
}
.btn{ display:inline-block; padding:12px 18px; border-radius:12px; text-decoration:none;
      border:1px solid rgba(255,255,255,.14); transition:transform .12s ease, background .2s; }
.btn:hover{ transform:translateY(-1px) }
.btn.primary{ background:#e7ebf4; color:#0b0d13; }
.btn.ghost{ background:transparent; color:#e7ebf4; }

/* global veil easing while in gauntlet */
body::after{ opacity: var(--abyss, 0); }
body.in-gauntlet::after{ opacity: .15; }
/* === Single follower ghost === */
.followerGhost{
  position:absolute; left:50%; top:50%;
  transform: translate(-50%,-50%) scale(0.75);
  opacity:0; transition: opacity 600ms ease;
  filter: drop-shadow(0 10px 24px rgba(0,0,0,.55));
  pointer-events:none;            /* the ghost itself doesn’t take clicks */
  will-change: transform, opacity;
  z-index: 3;                     /* above sparkles/glyphs */
}
.followerGhost.show{ opacity:.85; }

/* idle bob when the user is still */
.followerGhost.idle{ animation: fgBob 3.6s ease-in-out infinite; }
@keyframes fgBob{
  0%,100%{ transform: translate(-50%,-51%) scale(0.75); }
  50%    { transform: translate(-50%,-49%) scale(0.75); }
}

/* speech bubble */
.followerGhost .askBubble{
  position:absolute; left:50%; top: calc(100% + -50px); transform: translateX(-50%);
  background: linear-gradient(180deg, rgba(16,22,32,.96), rgba(10,14,22,.94));
  border:1px solid rgba(255,255,255,.15);
  color:#e8edf8; border-radius:14px; padding:10px 14px;
  font-size: clamp(12px,1.35vw,14px); line-height:1.35; white-space:nowrap;
  opacity:0; pointer-events:auto; transition: opacity .25s ease, transform .25s ease;
}
.followerGhost .askBubble::after{
  content:""; position:absolute; left:50%; top:-8px; transform:translateX(-50%);
  border-left:8px solid transparent; border-right:8px solid transparent;
  border-bottom:8px solid rgba(16,22,32,.96);
}
.followerGhost .askBubble.show{ opacity:1; transform: translateX(-50%) }
.followerGhost { will-change: transform, opacity; }
.followerGhost .askBubble { transition: opacity .18s ease, transform .18s ease; }
.followerGhost .askBubble.show { opacity: 1; transform: translate(-50%,0); }
/* --- gentle idle bob on follower & perched ghosts --- */
.followerGhost.idle .sprite,
.perchGhost .sprite { animation: ghostBob 3.8s ease-in-out infinite; }
@keyframes ghostBob { 0%,100% { transform: translateY(-2px) } 50% { transform: translateY(2px) } }

/* --- eye blink (target .eye elements inside the SVG) --- */
.followerGhost .eye, .perchGhost .eye {
  transform-origin: center;
  animation: blink 6.5s infinite;
  animation-delay: var(--blink, 0s);
}
@keyframes blink { 0%,97%,100% { transform: scaleY(1) } 98% { transform: scaleY(0.1) } }

/* --- tiny one-shot glitch nudge --- */
.followerGhost.glitch .sprite, .perchGhost.glitch .sprite {
  animation: ghostGlitch 0.16s steps(2, end) 1;
}
@keyframes ghostGlitch {
  0% { transform: translate(0,0); filter: hue-rotate(0deg); }
  100% { transform: translate(-2px,1px); filter: hue-rotate(16deg); }
}

/* Perched ghosts near bottom/sides */
#gauntlet .perchGhost{
  position:absolute; inset:auto;
  pointer-events:none; z-index:2; opacity:0;
  transform: translate(-50%,-50%) scale(var(--s,0.70));
  filter: drop-shadow(0 10px 24px rgba(0,0,0,.55));
  will-change: transform, opacity;
}/* DRIFTERS (ex-perched) — subtle float + occasional nudge */
.drifterGhost {
  position:absolute; inset:auto; z-index:2; opacity:0;
  transform: translate(-50%,-50%) scale(var(--s,0.70));
  filter: drop-shadow(0 10px 24px rgba(0,0,0,.55));
  will-change: transform, opacity;
}
.drifterGhost .sprite { animation: ghostBob 4.2s ease-in-out infinite; }

/* micro offsets to stop bubble stacking perfectly */
.drifterGhost .askBubble, .followerGhost .askBubble { will-change: transform, opacity; }

/* “crowd” look: bubbles can overlap a bit without being unreadable */
.askBubble { mix-blend-mode: normal; }
