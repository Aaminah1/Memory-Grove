/* Reset + base */
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background: #0e0f14; color: #e6e6e6; line-height: 1.5;
}

/* Header */
.site-header {
  display:flex; justify-content:space-between; align-items:center;
  padding:1rem; background:#16171d; border-bottom:1px solid #2a2b33;
}
.site-header h1 { font-size:1.2rem; }
/* make the brand look like plain text but clickable */
.site-header .brand-link {
  color: inherit;
  text-decoration: none;
}
.site-header .brand-link:hover {
  text-decoration: underline;
}
.site-header .brand-link:focus-visible {
  outline: 2px solid #8aa0ff;
  outline-offset: 2px;
  border-radius: 4px;
}

nav { display:flex; gap:.5rem; }
.tab {
  background:#22242e; color:#e6e6e6; border:1px solid #2a2b33;
  padding:.5rem 1rem; border-radius:999px; cursor:pointer; transition:.15s ease;
}
.tab:hover { background:#2a2d3a; }
.tab:active { transform: translateY(1px); }
.tab.active { background:#3b3f52; }

/* Badge on Grove tab */
.badge {
  display:inline-block; min-width:1.25rem; padding:0 .35rem;
  margin-left:.4rem; font-size:.75rem; line-height:1.25rem; text-align:center;
  color:#0e0f14; background:#c9a806; border-radius:999px; font-weight:700;
}

/* Pulse highlight */
.tab.pulse {
  box-shadow: 0 0 0 0 rgba(201,168,6,.6);
  animation: pulse 1.5s ease-out 2;
}
@keyframes pulse {
  0% { box-shadow: 0 0 0 0 rgba(201,168,6,.6); }
  100%{ box-shadow: 0 0 0 18px rgba(201,168,6,0); }
}

/* Panels */
main { padding:1rem; max-width:900px; margin:auto; }
.panel { margin-top:1rem; }
.help { color:#aab0bb; font-size:.92rem; margin-top:.35rem; }
#groveSection.panel { max-width: min(1400px, 96vw); margin-inline:auto; }

/* Stepper */
.stepper { display:flex; align-items:center; gap:.35rem; color:#9aa1ad; font-size:.9rem; }
.stepper .step.active { color:#e6e6e6; font-weight:600; }
.stepper .sep { opacity:.4; }

/* Nudge bar */
.nudge {
  margin-top:.5rem; padding:.5rem .7rem;
  background:#12141c; border:1px solid #2a2b33; border-radius:10px; color:#d9dce2;
}
.linky {
  background:transparent; border:none; color:#8aa0ff; text-decoration:underline; cursor:pointer;
  padding:0 .15rem;
}
.linky:hover { opacity:.85; }

/* Ask row */
.ask-row { display:grid; gap:.6rem; grid-template-columns: 1fr auto; align-items:start; }
textarea {
  width:100%; min-height:72px; padding:.6rem;
  background:#10121a; border:1px solid #2a2b33; border-radius:10px; color:#fff;
}
/* Character counter */
#qCount {
  font-size: 0.85rem;
  color: #9aa0aa;
}
#qCount.limit {
  color: #e5534b;           /* turns red at max */
  font-weight: 600;
}

button {
  background:#2a2d3a; border:1px solid #2a2b33; color:#e6e6e6;
  padding:.55rem 1rem; border-radius:10px; cursor:pointer; transition:.15s ease;
}
button:hover { background:#3a3e52; }
button:active { transform: translateY(1px); }
button[disabled] { opacity:.6; cursor:not-allowed; }

/* Tombstone (reply) */
.tombstone {
  margin-top:1rem; padding:1rem; border-radius:18px;
  background:#14151c; border:1px solid #2a2b33; position:relative; overflow:hidden;
}
.grave-top { display:flex; align-items:center; gap:.6rem; margin-bottom:.5rem; }
.grave-icon { font-size:1.4rem; filter: drop-shadow(0 0 6px rgba(255,255,255,.06)); }
.grave-inscription { font-variant:small-caps; letter-spacing:.08em; color:#bfbfbf; text-shadow:0 1px 0 rgba(0,0,0,.4); }
.tombstone p { margin-top:.4rem; color:#d7d7d7; }

/* subtle candle glow */
.tombstone::after {
  content:""; position:absolute; top:-30px; left:50%; transform:translateX(-50%);
  width:200px; height:60px; border-radius:50%;
  background: radial-gradient(ellipse at center, rgba(255,240,200,.15), transparent 60%);
  animation: flicker 3.8s ease-in-out infinite; pointer-events:none;
}
@keyframes flicker { 0%,100%{opacity:.35; transform:translateX(-50%) scale(1);} 50%{opacity:.15; transform:translateX(-50%) scale(1.05);} }

/* Skeleton */
.skeleton { margin-top:.25rem; }
.shimmer { height:12px; border-radius:6px; background:#1a1c25; overflow:hidden; position:relative; }
.shimmer::after {
  content:""; position:absolute; inset:0;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,.06), transparent);
  animation: shimmer 1200ms infinite;
}
.shimmer.line { margin-top:.4rem; }
.shimmer.line.short { width:60%; }
@keyframes shimmer { 0%{transform:translateX(-100%);} 100%{transform:translateX(100%);} }

/* Error box */
.error {
  margin-top:.5rem; background:#2b1d1f; color:#ffdede;
  border:1px solid #e5534b; border-radius:10px; padding:.55rem .7rem;
}

/* Classification */
.classify { margin-top:1rem; }
.classify-row { display:flex; gap:.5rem; margin:.35rem 0 .6rem; }
.classify button[data-class="green"] { background:#234f2e; border-color:#3fb950; color:#dfffe9; }
.classify button[data-class="green"].active { background:#2ea043; border-color:#2ea043; }
.classify button[data-class="yellow"] { background:#4f4a23; border-color:#c9a806; color:#fff7d1; }
.classify button[data-class="yellow"].active { background:#c9a806; border-color:#c9a806; color:#222; }
.classify button[data-class="red"] { background:#4f2323; border-color:#e5534b; color:#ffe1df; }
.classify button[data-class="red"].active { background:#e5534b; border-color:#e5534b; color:#fff; }

/* Action bar */
.action-bar { display:flex; align-items:center; gap:.5rem; margin-top:.6rem; position:sticky; bottom:.5rem; }
.chip { background:#1b1d26; border:1px solid #2a2b33; padding:.25rem .5rem; border-radius:999px; font-size:.85rem; color:#cfd2d8; }

/* ------ GROVE (graveyard area) ------ */
.grove-toolbar { display:flex; align-items:center; gap:.5rem; margin:.5rem 0; }
.grove-toolbar .filter-btn {
  background:#22242e; border:1px solid #2a2b33; padding:.35rem .7rem; border-radius:999px; font-size:.9rem; cursor:pointer;
}
.grove-toolbar .filter-btn[aria-pressed="true"] { background:#3b3f52; }
/* let clicks pass through the inscription block */
#groveCanvas foreignObject,
#groveCanvas .stone-inscription {
  pointer-events: none;
}

/* (optional) also let overlays pass clicks through */
#groveCanvas image.overlay {
  pointer-events: none;
}





/* Hint under the grove */
.hint { color:#9aa0aa; margin-top:.5rem; font-size:.9rem; }

/* Stones/labels/halos */
.stone:hover { filter: brightness(1.05); }
.stone-halo.green  { stroke:#7bd389; }
.stone-halo.yellow { stroke:#e1d97a; }
.stone-halo.red    { stroke:#ee8a8a; }

/* Type-to-reveal classify */
#classifyBox[hidden]{display:none;}
#classifyBox{opacity:0;transition:opacity .25s ease;}
#classifyBox:not([hidden]){opacity:1;}

/* A11y utility */
.visually-hidden {
  position:absolute !important; height:1px; width:1px; overflow:hidden;
  clip: rect(1px,1px,1px,1px); white-space:nowrap;
}

/* Mobile tweaks */
@media (max-width: 640px) {
  .ask-row { grid-template-columns: 1fr; }
  button { padding:.6rem .85rem; }
  #groveSection.panel { max-width: 100vw; }
  .grove-frame { height: calc(100vh - 260px); min-height: 420px; }
}
/* Make ONLY the Grove section full-bleed across the page */
#groveSection.panel {
  width: 100vw;
  max-width: 100vw;
  margin-left: 50%;
  transform: translateX(-50%);
  padding-inline: clamp(12px, 4vw, 32px);
}

/* Big responsive graveyard area */
.grove-frame {
  margin-top: .75rem;
  background: #0f1117;
  border: 1px solid #2a2b33;
  border-radius: 14px;

  /* keep clipping, but add real inner space */
  overflow: hidden;
  padding: 72px 40px 72px;    box-sizing: border-box;    /* â† so the padding doesn't grow the visual height */

  width: 100%;
  height: calc(100vh - 160px);
  min-height: 720px;
}

/* make the SVG fill the padded box cleanly */
.grove-frame > svg#groveCanvas {
  display: block;
  width: 100%;
  height: 100%;
}


/* Let SVG stretch to the frame */
#groveCanvas { width: 100%; height: 100%; display: block; }

/* Labels (if you kept them) */

/* If you still have halo elements and want them invisible anyway */
.stone-halo { opacity: 0 !important; }
/* Inscription text inside each tombstone */
/* text that sits inside the tombstone */
.stone-inscription {
  width:100%; height:100%;
  display:flex; align-items:center; justify-content:center;
  text-align:center;
  line-height:1.2;
  padding:8px 10px;     /* add extra breathing room */
  color:#1e2026;
  overflow:hidden;
  word-break:break-word;
  hyphens:auto;

  display:-webkit-box;
  -webkit-box-orient:vertical;
  -webkit-line-clamp:3;
}


